# 总测试报告

## 版本修订记录

| 版本  |    日期    |     修改内容     |  作者  |
| :---: | :--------: | :--------------: | :----: |
| v0.1  | 2020.06.22 | 完成单元测试内容 | 庄子元 |
| v0.2  | 2020.06.25 |   完成功能测试   | 庄子元 |

[TOC]

## 1. 引言

本文档对单元测试的结果进行整理和汇总，形成正式的测试文档，对软件单元的评审验收提供依据，成为单元测试评审和代码评审的材料。

### 1.1 文档标识

* Copyright©Awesome Hotel
* 2020年6月22日
* 南京大学软件学院
* 作者 庄子元 @NIL-zhuang 181830266@smail.nju.edu.cn
* 版本 v1.0
* 状态 提交版本

本文档为**Awesome Hotel**小组的代码测试报告。

### 1.2 目的

本文档通过JUnit和SpringBootTest对Awesome Hotel的后端代码和相关功能进行测试，旨在减少开发过程中的bug，减少软件缺陷，提高系统安全性和稳定性。

### 1.3 测试概述

|          |                                                              |
| :------: | :----------------------------------------------------------: |
| 产品名称 |                         Awesom Hotel                         |
|   版本   |                             v2.0                             |
| 测试类型 |                          JUnit测试                           |
| 测试标准 |                 软件工程与计算Ⅰ中的测试标准                  |
| 测试方法 |               单元测试，功能测试和集成测试结合               |
| 硬件环境 |                  Intel(R) Core(TM) i7-8550U                  |
| 软件环境 | 数据库服务器 MySQL5<br> 应用服务器 Tomcat <br> 客户端 Chrome |
| 测试平台 |                        windows10 1909                        |

## 2. 测试过程

### 2.1 开发时测试

代码在开发过程中，要求在实现接口的过程中同时进行单元测试的构建，处理接口的代码缺陷。

### 2.2 开发结束后验证测试

在代码开发完成后，进行集成测试，测试代码覆盖率

## 3. 单元测试

|   测试类型   | 测试要求 |  测试结果   | 是否通过 |
| :----------: | :------: | :---------: | :------: |
|   类覆盖率   |   80%    |    84.9%    |   通过   |
|  方法覆盖率  |   70%    |    70.4%    |   通过   |
| 代码行覆盖率 |   65%    |    65.4%    |   通过   |
|   单元测试   | 全部通过 | 通过177/177 |   通过   |

单元测试对Admin, Hotel, Order, User, Question, Coupon, VIP等模块的Service和Mapper类提供的所有接口进行单元测试，以排查潜在的代码错误、接口错误。

该部分的测试提供了接口的代码片段需要满足的严密的书面规约，在开发人员开发功能、自我检查时排查开发过程中的bug。

单元测试的详细测试报告见[Test Results](hotelTest.html)

单元测试代码覆盖率测试见[CoverageTest](CoverageTest/index.html)

## 4. 功能测试

功能测试根据产品特性、操作描述和需求规格文档，测试Awesome Hotel的Admin, Hotel, Order等模块内部特性，以确定他们满足设计需求。

碍于开发周期和时间影响，我们选择了各个模块中较为核心的几个用例进行测试。

在和Coupon，Question-Answer, VIP等模块中，由于撰写测试用例较为费时费力，我们在生产环境下进行了多次实际测试，以确保测试无误。

### 1. AdminTest

|      功能       |        测试         |
| :-------------: | :-----------------: |
|   添加manager   |   manager添加成功   |
| 添加salesPerson | salesPerson添加成功 |
|   删除manager   |      删除成功       |
| 删除salesPerson |      删除成功       |

### 2. HotelTest

|      功能      |     测试     |
| :------------: | :----------: |
|    添加酒店    |   添加成功   |
|  更新酒店信息  |   更新成功   |
|   添加大床房   |   添加成功   |
|  更新房间信息  |   更新成功   |
|    删除房间    |   删除成功   |
| 添加第一个评论 |   评分更新   |
| 添加第二个评论 | 评分已求平均 |
|    删除酒店    |   删除成功   |

注: hotelSearchService的相关功能已在单元测试中进行检测，与HotelService和RoomService的耦合度很低，不在hotelTest里重复测试。

### 3. OrderTest

|         功能         |            测试            |
| :------------------: | :------------------------: |
|       添加订单       |        订单添加成功        |
|    标记为异常订单    | 标记失败，订单不是异常订单 |
| 操作数据库标记为异常 |          标记成功          |
|     申诉异常订单     |          申诉成功          |
|     处理异常订单     |          处理成功          |
|       添加评论       |          添加成功          |
|       撤销评论       |          撤销成功          |

## 5. 集成测试

## 4. 总结

代码质量达到预计要求，可予以交付
